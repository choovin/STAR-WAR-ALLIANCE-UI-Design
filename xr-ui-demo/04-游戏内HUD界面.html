<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MR星战大联盟 - 游戏内HUD界面</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <style>
        body {
            margin: 0;
            background: #000;
            overflow: hidden;
        }
        #ui-overlay {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #00ffff;
            font-family: 'Arial', sans-serif;
            z-index: 1000;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="ui-overlay">
        <div>MR星战大联盟 - 游戏内HUD界面</div>
        <div>实时战斗信息 | 沉浸式HUD</div>
    </div>

    <a-scene 
        background="color: #001122"
        vr-mode-ui="enabled: true"
        device-orientation-permission-ui="enabled: false"
        loading-screen="dotsColor: #00ffff; backgroundColor: #000">
        
        <!-- 资源预加载 -->
        <a-assets>
            <a-mixin id="hud-element" 
                material="transparent: true; opacity: 0.8">
            </a-mixin>
            <a-mixin id="warning-flash" 
                animation__flash="property: material.opacity; to: 0.3; direction: alternate; dur: 500; repeat: indefinite">
            </a-mixin>
        </a-assets>

        <!-- 环境光照 -->
        <a-light type="ambient" color="#202040" intensity="0.5"></a-light>
        <a-light type="directional" position="5 10 5" color="#ffffff" intensity="0.8"></a-light>

        <!-- 战场环境背景 -->
        <a-sky color="#001133">
            <a-animation attribute="rotation" 
                to="0 360 0" 
                dur="300000" 
                repeat="indefinite">
            </a-animation>
        </a-sky>

        <!-- 模拟战场环境 -->
        <a-entity id="battlefield">
            <!-- 地面 -->
            <a-plane 
                position="0 0 0" 
                rotation="-90 0 0" 
                width="50" 
                height="50" 
                color="#223344" 
                material="roughness: 0.8">
            </a-plane>
            
            <!-- 建筑物 -->
            <a-box 
                position="5 1 -8" 
                width="2" 
                height="2" 
                depth="3" 
                color="#334455" 
                material="roughness: 0.7">
            </a-box>
            <a-box 
                position="-3 1.5 -5" 
                width="1.5" 
                height="3" 
                depth="2" 
                color="#445566" 
                material="roughness: 0.7">
            </a-box>
            
            <!-- 掩体 -->
            <a-cylinder 
                position="2 0.5 -3" 
                radius="0.5" 
                height="1" 
                color="#556677" 
                material="roughness: 0.8">
            </a-cylinder>
        </a-entity>

        <!-- HUD界面元素 -->
        <a-entity id="hud-container" position="0 1.6 0">
            
            <!-- 准星系统 -->
            <a-entity id="crosshair" position="0 0 -0.5">
                <!-- 主准星 -->
                <a-ring 
                    radius-inner="0.008" 
                    radius-outer="0.012" 
                    color="#00ffff" 
                    material="transparent: true; opacity: 0.8; emissive: #00ffff; emissiveIntensity: 0.5">
                </a-ring>
                <!-- 准星线条 -->
                <a-plane 
                    position="0 0.02 0" 
                    width="0.002" 
                    height="0.015" 
                    color="#00ffff" 
                    material="transparent: true; opacity: 0.8">
                </a-plane>
                <a-plane 
                    position="0 -0.02 0" 
                    width="0.002" 
                    height="0.015" 
                    color="#00ffff" 
                    material="transparent: true; opacity: 0.8">
                </a-plane>
                <a-plane 
                    position="0.02 0 0" 
                    width="0.015" 
                    height="0.002" 
                    color="#00ffff" 
                    material="transparent: true; opacity: 0.8">
                </a-plane>
                <a-plane 
                    position="-0.02 0 0" 
                    width="0.015" 
                    height="0.002" 
                    color="#00ffff" 
                    material="transparent: true; opacity: 0.8">
                </a-plane>
            </a-entity>

            <!-- 生命值和护甲 (左下角) -->
            <a-entity id="health-armor" position="-0.8 -0.6 -1">
                <!-- 生命值背景 -->
                <a-plane 
                    width="0.4" 
                    height="0.15" 
                    color="#001100" 
                    mixin="hud-element">
                </a-plane>
                <!-- 生命值条 -->
                <a-plane 
                    id="health-bar" 
                    position="0 0 0.001" 
                    width="0.35" 
                    height="0.08" 
                    color="#00ff00" 
                    material="transparent: true; opacity: 0.9">
                </a-plane>
                <!-- 生命值文字 -->
                <a-text 
                    id="health-text" 
                    value="HP: 100" 
                    position="0 0 0.002" 
                    align="center" 
                    color="#ffffff" 
                    width="8">
                </a-text>
                
                <!-- 护甲值 -->
                <a-plane 
                    position="0 -0.2 0" 
                    width="0.4" 
                    height="0.12" 
                    color="#000011" 
                    mixin="hud-element">
                </a-plane>
                <a-plane 
                    id="armor-bar" 
                    position="0 -0.2 0.001" 
                    width="0.3" 
                    height="0.06" 
                    color="#0066ff" 
                    material="transparent: true; opacity: 0.9">
                </a-plane>
                <a-text 
                    id="armor-text" 
                    value="护甲: 75" 
                    position="0 -0.2 0.002" 
                    align="center" 
                    color="#ffffff" 
                    width="6">
                </a-text>
            </a-entity>

            <!-- 弹药信息 (右下角) -->
            <a-entity id="ammo-info" position="0.8 -0.6 -1">
                <!-- 当前弹夹 -->
                <a-plane 
                    width="0.3" 
                    height="0.2" 
                    color="#110000" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    id="current-ammo" 
                    value="30" 
                    position="0 0.03 0.001" 
                    align="center" 
                    color="#ffffff" 
                    width="12">
                </a-text>
                <a-text 
                    value="/" 
                    position="0 -0.03 0.001" 
                    align="center" 
                    color="#888888" 
                    width="8">
                </a-text>
                
                <!-- 备用弹药 -->
                <a-plane 
                    position="0 -0.25 0" 
                    width="0.25" 
                    height="0.15" 
                    color="#110000" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    id="reserve-ammo" 
                    value="120" 
                    position="0 -0.25 0.001" 
                    align="center" 
                    color="#ffaa00" 
                    width="8">
                </a-text>
            </a-entity>

            <!-- 小地图 (右上角) -->
            <a-entity id="minimap" position="0.7 0.5 -1">
                <!-- 地图背景 -->
                <a-plane 
                    width="0.4" 
                    height="0.4" 
                    color="#001122" 
                    mixin="hud-element"
                    material="emissive: #002244; emissiveIntensity: 0.2">
                </a-plane>
                <!-- 地图边框 -->
                <a-plane 
                    width="0.42" 
                    height="0.42" 
                    color="#00ffff" 
                    material="transparent: true; opacity: 0.3; wireframe: true">
                </a-plane>
                
                <!-- 玩家位置 (中心点) -->
                <a-sphere 
                    position="0 0 0.001" 
                    radius="0.015" 
                    color="#00ff00" 
                    material="emissive: #00ff00; emissiveIntensity: 0.8">
                    <a-animation attribute="scale" 
                        to="1.2 1.2 1.2" 
                        direction="alternate" 
                        dur="1000" 
                        repeat="indefinite">
                    </a-animation>
                </a-sphere>
                
                <!-- 队友位置 -->
                <a-sphere 
                    position="0.08 0.05 0.001" 
                    radius="0.01" 
                    color="#0066ff" 
                    material="emissive: #0066ff; emissiveIntensity: 0.6">
                </a-sphere>
                <a-sphere 
                    position="-0.06 0.1 0.001" 
                    radius="0.01" 
                    color="#0066ff" 
                    material="emissive: #0066ff; emissiveIntensity: 0.6">
                </a-sphere>
                
                <!-- 敌人位置 -->
                <a-sphere 
                    position="0.12 -0.08 0.001" 
                    radius="0.01" 
                    color="#ff0000" 
                    material="emissive: #ff0000; emissiveIntensity: 0.8">
                    <a-animation attribute="material.emissiveIntensity" 
                        to="0.3" 
                        direction="alternate" 
                        dur="800" 
                        repeat="indefinite">
                    </a-animation>
                </a-sphere>
            </a-entity>

            <!-- 得分和击杀信息 (左上角) -->
            <a-entity id="score-info" position="-0.7 0.5 -1">
                <!-- 击杀数 -->
                <a-plane 
                    width="0.35" 
                    height="0.12" 
                    color="#001100" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    id="kills" 
                    value="击杀: 5" 
                    position="0 0 0.001" 
                    align="center" 
                    color="#00ff00" 
                    width="6">
                </a-text>
                
                <!-- 死亡数 -->
                <a-plane 
                    position="0 -0.15 0" 
                    width="0.35" 
                    height="0.12" 
                    color="#110000" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    id="deaths" 
                    value="死亡: 2" 
                    position="0 -0.15 0.001" 
                    align="center" 
                    color="#ff6600" 
                    width="6">
                </a-text>
                
                <!-- 得分 -->
                <a-plane 
                    position="0 -0.3 0" 
                    width="0.35" 
                    height="0.12" 
                    color="#000011" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    id="score" 
                    value="得分: 1250" 
                    position="0 -0.3 0.001" 
                    align="center" 
                    color="#00ffff" 
                    width="5">
                </a-text>
            </a-entity>

            <!-- 游戏时间和模式 (顶部中央) -->
            <a-entity id="game-info" position="0 0.7 -1">
                <!-- 游戏时间 -->
                <a-plane 
                    width="0.5" 
                    height="0.15" 
                    color="#001122" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    id="game-time" 
                    value="05:32" 
                    position="0 0.02 0.001" 
                    align="center" 
                    color="#ffffff" 
                    width="8">
                </a-text>
                <a-text 
                    value="团队竞技" 
                    position="0 -0.05 0.001" 
                    align="center" 
                    color="#ffaa00" 
                    width="4">
                </a-text>
            </a-entity>

            <!-- 队伍得分 (顶部) -->
            <a-entity id="team-scores" position="0 0.45 -1">
                <!-- 我方得分 -->
                <a-plane 
                    position="-0.3 0 0" 
                    width="0.25" 
                    height="0.12" 
                    color="#000011" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    value="蓝队: 45" 
                    position="-0.3 0 0.001" 
                    align="center" 
                    color="#0066ff" 
                    width="5">
                </a-text>
                
                <!-- 敌方得分 -->
                <a-plane 
                    position="0.3 0 0" 
                    width="0.25" 
                    height="0.12" 
                    color="#110000" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    value="红队: 38" 
                    position="0.3 0 0.001" 
                    align="center" 
                    color="#ff0000" 
                    width="5">
                </a-text>
            </a-entity>

            <!-- 武器信息 (底部中央) -->
            <a-entity id="weapon-info" position="0 -0.8 -1">
                <a-plane 
                    width="0.6" 
                    height="0.15" 
                    color="#001100" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    value="AK-47 突击步枪" 
                    position="0 0.02 0.001" 
                    align="center" 
                    color="#ffffff" 
                    width="5">
                </a-text>
                <a-text 
                    value="全自动 | 7.62mm" 
                    position="0 -0.04 0.001" 
                    align="center" 
                    color="#888888" 
                    width="4">
                </a-text>
            </a-entity>

            <!-- 击杀提示 -->
            <a-entity id="kill-feed" position="0.5 0.2 -1">
                <a-plane 
                    width="0.8" 
                    height="0.4" 
                    color="#000000" 
                    material="transparent: true; opacity: 0.6">
                </a-plane>
                <a-text 
                    value="玩家1 击杀了 敌人3" 
                    position="0 0.15 0.001" 
                    align="center" 
                    color="#00ff00" 
                    width="4">
                </a-text>
                <a-text 
                    value="玩家2 击杀了 敌人1" 
                    position="0 0.05 0.001" 
                    align="center" 
                    color="#00ff00" 
                    width="4">
                </a-text>
                <a-text 
                    value="敌人2 击杀了 队友4" 
                    position="0 -0.05 0.001" 
                    align="center" 
                    color="#ff6600" 
                    width="4">
                </a-text>
                <a-text 
                    value="你击杀了 敌人5" 
                    position="0 -0.15 0.001" 
                    align="center" 
                    color="#ffff00" 
                    width="4">
                </a-text>
            </a-entity>

            <!-- 警告信息 -->
            <a-entity id="warnings" position="0 0 -0.8">
                <!-- 低血量警告 -->
                <a-plane 
                    id="low-health-warning" 
                    width="1.5" 
                    height="0.2" 
                    color="#ff0000" 
                    material="transparent: true; opacity: 0"
                    mixin="warning-flash">
                </a-plane>
                <a-text 
                    value="生命值过低!" 
                    position="0 0 0.001" 
                    align="center" 
                    color="#ffffff" 
                    width="6">
                </a-text>
            </a-entity>

            <!-- 技能冷却 -->
            <a-entity id="abilities" position="-0.5 -0.4 -1">
                <!-- 技能1 -->
                <a-plane 
                    position="0 0 0" 
                    width="0.15" 
                    height="0.15" 
                    color="#003300" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    value="Q" 
                    position="0 0 0.001" 
                    align="center" 
                    color="#00ff00" 
                    width="6">
                </a-text>
                
                <!-- 技能2 -->
                <a-plane 
                    position="0.2 0 0" 
                    width="0.15" 
                    height="0.15" 
                    color="#330000" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    value="E" 
                    position="0.2 0 0.001" 
                    align="center" 
                    color="#ff6600" 
                    width="6">
                </a-text>
                
                <!-- 技能3 -->
                <a-plane 
                    position="0.4 0 0" 
                    width="0.15" 
                    height="0.15" 
                    color="#000033" 
                    mixin="hud-element">
                </a-plane>
                <a-text 
                    value="R" 
                    position="0.4 0 0.001" 
                    align="center" 
                    color="#0066ff" 
                    width="6">
                </a-text>
            </a-entity>
        </a-entity>

        <!-- 用户摄像头和控制器 -->
        <a-entity id="rig" position="0 1.6 0">
            <a-camera 
                look-controls="pointerLockEnabled: true"
                wasd-controls="enabled: true; acceleration: 20">
            </a-camera>
            
            <!-- 左手控制器 -->
            <a-entity 
                id="left-hand" 
                hand-controls="hand: left; handModelStyle: lowPoly; color: #15ACCF"
                laser-controls="hand: left">
            </a-entity>
            
            <!-- 右手控制器 -->
            <a-entity 
                id="right-hand" 
                hand-controls="hand: right; handModelStyle: lowPoly; color: #15ACCF"
                laser-controls="hand: right">
            </a-entity>
        </a-entity>

        <!-- 游戏逻辑脚本 -->
        <script>
            // 游戏状态
            let gameState = {
                health: 100,
                armor: 75,
                currentAmmo: 30,
                reserveAmmo: 120,
                kills: 5,
                deaths: 2,
                score: 1250,
                gameTime: 332, // 秒
                blueTeamScore: 45,
                redTeamScore: 38
            };

            // 更新HUD显示
            function updateHUD() {
                // 更新生命值
                const healthBar = document.querySelector('#health-bar');
                const healthText = document.querySelector('#health-text');
                healthBar.setAttribute('width', (gameState.health / 100) * 0.35);
                healthText.setAttribute('value', `HP: ${gameState.health}`);
                
                // 低血量警告
                const lowHealthWarning = document.querySelector('#low-health-warning');
                if (gameState.health < 30) {
                    lowHealthWarning.setAttribute('material', 'opacity: 0.7');
                } else {
                    lowHealthWarning.setAttribute('material', 'opacity: 0');
                }

                // 更新护甲
                const armorBar = document.querySelector('#armor-bar');
                const armorText = document.querySelector('#armor-text');
                armorBar.setAttribute('width', (gameState.armor / 100) * 0.3);
                armorText.setAttribute('value', `护甲: ${gameState.armor}`);

                // 更新弹药
                document.querySelector('#current-ammo').setAttribute('value', gameState.currentAmmo.toString());
                document.querySelector('#reserve-ammo').setAttribute('value', gameState.reserveAmmo.toString());

                // 更新得分信息
                document.querySelector('#kills').setAttribute('value', `击杀: ${gameState.kills}`);
                document.querySelector('#deaths').setAttribute('value', `死亡: ${gameState.deaths}`);
                document.querySelector('#score').setAttribute('value', `得分: ${gameState.score}`);

                // 更新游戏时间
                const minutes = Math.floor(gameState.gameTime / 60);
                const seconds = gameState.gameTime % 60;
                const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.querySelector('#game-time').setAttribute('value', timeString);
            }

            // 模拟游戏事件
            function simulateGameEvents() {
                // 随机减少生命值
                if (Math.random() < 0.1) {
                    gameState.health = Math.max(0, gameState.health - Math.floor(Math.random() * 10));
                }

                // 随机消耗弹药
                if (Math.random() < 0.3) {
                    gameState.currentAmmo = Math.max(0, gameState.currentAmmo - 1);
                }

                // 随机增加得分
                if (Math.random() < 0.05) {
                    gameState.score += Math.floor(Math.random() * 100) + 50;
                    gameState.kills++;
                }

                // 游戏时间递减
                gameState.gameTime = Math.max(0, gameState.gameTime - 1);

                updateHUD();
            }

            // 键盘事件处理
            document.addEventListener('keydown', function(event) {
                switch(event.code) {
                    case 'KeyR':
                        // 换弹
                        if (gameState.reserveAmmo > 0) {
                            const reloadAmount = Math.min(30 - gameState.currentAmmo, gameState.reserveAmmo);
                            gameState.currentAmmo += reloadAmount;
                            gameState.reserveAmmo -= reloadAmount;
                            console.log('换弹完成');
                        }
                        break;
                    case 'KeyQ':
                        console.log('使用技能Q');
                        break;
                    case 'KeyE':
                        console.log('使用技能E');
                        break;
                }
                updateHUD();
            });

            // 初始化HUD
            updateHUD();

            // 定时更新游戏状态
            setInterval(simulateGameEvents, 1000);

            // 模拟击杀提示更新
            const killMessages = [
                '玩家1 击杀了 敌人3',
                '玩家2 击杀了 敌人1', 
                '敌人2 击杀了 队友4',
                '你击杀了 敌人5'
            ];

            setInterval(() => {
                // 这里可以添加动态更新击杀提示的逻辑
            }, 5000);
        </script>
    </a-scene>
</body>
</html>